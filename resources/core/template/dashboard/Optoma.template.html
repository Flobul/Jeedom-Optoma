<div class="eqLogic eqLogic-widget allowResize allowReorderCmd #custom_layout# #class#" data-eqType="#eqType#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#" style="width: #width#;height: #height#; margin: 4px; padding: 0px; position: absolute; #style#">
	<span class="statusCmd" style="position : absolute;right : 5px; width : 30px;z-index: 1030;"></span>
	<i class='fa fa-refresh pull-right cursor refresh' style="margin-top: 3px;margin-right: 6px;"></i>
	<center><a href="#eqLink#" style="font-size : 1.5em;"> #name# </a></center>

		<span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
			<i class="fas fa-sync"></i>
		</span>
	<div class="row">
		<center>
          <div class="cmdName">#device_type#</div>
          <div class="cmdName">#device_model#</div>
		<div class="col-sm-6">
			<div class="power">
				<a class="cmd" data-cmd_id="#power_on_id#" title="#collect_power#"></a>
				<a class="cmd" data-cmd_id="#power_off_id#" title="#collect_power#"></a>
			</div>
			<div class="mute">
				<a class="cursor" id="#id#_mute_action" title="#collect_mute#"></a>
			</div>
		</div>
		<div class="col-sm-6">
			<div>
				<a class="cursor" id="#id#_volumeup_action"><img src='plugins/Optoma/core/template/images/plus.png'/></a>
			</div>
			<div>
				<a class="cursor" id="#id#_volumedown_action"><img src='plugins/Optoma/core/template/images/minus.png'/></a>
			</div>
		</div>
		</center>
	</div>
	<div class="row">
	<center>
		<div class="col-sm-12">
			<svg id="#id#svg" alt="" style="width:100%;max-height:90px;">
				<use xlink:href="plugins/Optoma/core/template/images/Optoma_icon.svg#VP_icon"></use>
     		</svg>
		</div>
	</center>
	</div>
    <form class="form-inline">
        <div class="form-group">
          <div class="form-group-addon cmdName">Entrée vidéo</div>
          <select class="form-control selectCmd" data-cmd_id="#setinput_id#"></select>
        </div>
    </form>
            
	<script>
        var eqLogic = $('.eqLogic[data-eqLogic_uid=#uid#]');
		var image_sound = 'plugins/Optoma/core/template/images/sound.png';
		var image_mute = 'plugins/Optoma/core/template/images/mute.png';
		var image_power_on = 'plugins/Optoma/core/template/images/power_on.png';
		var image_power_off = 'plugins/Optoma/core/template/images/power_off.png';
      
		var inputList = '#setinput_source_listvalue#';
		var actualInputValue = ('#input_source#' != '#' + 'input_source#') ? '#input_source#' : '';
        var inputValue = '';
		var selectList = '';
		var options = inputList.split(/[;|]+/);
		for (var i = 0; i < options.length; i++) {
			if (i % 2 === 0) {
				inputValue = options[i];
			} else {
				if (options[i] == actualInputValue) {
					selectList += '<option value="' + inputValue + '" selected>' + options[i] + '</option>';
				} else {
					selectList += '<option value="' + inputValue + '">' + options[i] + '</option>';
				}
			}
		}
		eqLogic.find('.selectCmd').append(selectList);

		if('#power_status#' == 0) {
			$('.cmd[data-cmd_id=#power_on_id#]').append("<img src='" + image_power_on + "'/>");
			$('.cmd[data-cmd_id=#power_off_id#]').hide();
			$('##id#svg').attr({"fill":"#AD0C37",'title':'OFF'});
		} else {
			$('.cmd[data-cmd_id=#power_on_id#]').hide();
			$('.cmd[data-cmd_id=#power_off_id#]').append("<img src='" + image_power_off + "'/>");
			$('##id#svg').attr({"fill":"#39BE11",'title':'ON'});
		}
		if('#mute_status#' == 0) {
			$('##id#_mute_action').append("<img src='" + image_sound + "'/>");
		} else {
			$('##id#_mute_action').append("<img src='" + image_mute + "'/>");
		}
		$('##id#_mute_action').on('click', function(){
			if('#mute_status#' == 0) {
				jeedom.cmd.execute({id: '#id_mute_on#'});
			} else {
				jeedom.cmd.execute({id: '#id_mute_off#'});
			}
		});
		$('##id#_power_action').on('click', function(){
		switch ('#power_status#') {
			case '0':
				jeedom.cmd.execute({id: '#id_power_on#'});
				break;
			case '1':
                jeedom.cmd.execute({id: '#id_power_off#'});
				break;
		}
		if('#power_status#' == 0) {
			jeedom.cmd.execute({id: '#id_power_on#'});
		} else {
			jeedom.cmd.execute({id: '#id_power_off#'});
		}
		});
		$('##id#_volumeup_action').on('click', function(){
			jeedom.cmd.execute({id: '#id_volumeup#'});
		});
		$('##id#_volumedown_action').on('click', function(){
			jeedom.cmd.execute({id: '#id_volumedown#'});
		});
		$('.eqLogic[data-eqLogic_id=#id#] .refresh').on('click', function () {
			jeedom.cmd.execute({id: '#refresh_id#'});
		});

	</script>
</div>